## This repo contains all codes and configuration files for setting up a tool for a Network Monitoring system using 
## grafana , prometheus and tcpdump for Network Intrusion Detection and Prevention.


## Files Included:
*agent.yml<br>
*netlog.txt<br>
*prometheus.yml<br>
*rungrok.sh<br>
*generatelog.sh<br>
*demoicmptcp.sh<br>
*Malware-Project-1651257182819.json<br>
*promAlertAPI.py<br>
*server.sh<br>

## Configurations:
1) On the server, we have a configuration file for prometheus which is ‘prometheus.yml.’
Prometheus is run using “./server.sh”<br>
2) On Grafana, the dashboard has to be imported from the json file present.<br>
3) On client, we have:<br>
1. agent.yml => Configuration for grok-exporter<br>
2. generatelog.sh => To start generating logs.<br>
3. rungrok.sh => To run grok exporter.<br>
4. promAlertAPI.py => To run the Alert Webhook which will detect attack and add<br>
iptables rule to block attackers IP.<br>
5. netlog.txt => This will be generated by generatelog.sh which will be picked up by
grok-exporter.<br>

## Installation of tools:
1. Grafana: Using apt install grafana.<br>
2. Prometheus:<br>
It can be downloaded and set up from here:<br>
https://linuxhint.com/install-prometheus-on-ubuntu/<br>
3. TCPDump: Using apt install tcpdump<br>
4. Grok-Exporter: Using the github repository: https://github.com/fstab/grok_exporter<br>

## Running:
1. ./server.sh<br>
2. sudo systemctl start grafana<br>
3. On client: ./rungrok.sh<br>
4. On client: ./generatelog.sh<br>
5. On client: ./promAlertAPI.py<br>
6. The parameters need to be changed for Ip address.<br>

## Demo:
https://iitk-my.sharepoint.com/:u:/g/personal/akshay21_iitk_ac_in/Ec0UyOFly8BFkK-tFK1_Zx
cBpYEmDC4tyrWGlndzN6210g?e=emMSFt<br>
https://drive.google.com/file/d/1vsmBcbUZdJ-5zVsNcyJpXSkNb5bOGfAn/view?usp=sharing
